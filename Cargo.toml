[package]
name = "nameshed-hsm-relay"
version = "0.1.0"
edition = "2024"
authors = ["NLnet Labs <nameshed@nlnetlabs.nl>"]
description = "KMIP to PKCS#11 HSM relay for the Nameshed project"
repository = "https://github.com/NLnetLabs/nameshed-hsm-relay/"
keywords = ["KMIP", "PKCS#11", "HSM", "Rust"]
categories = ["cryptography"]
readme = "README.md"

[dependencies]
anyhow = "1.0"
clap = { version = "4.5", features = ["cargo", "derive"] }
cryptoki = "^0.9"
domain = { git = "https://github.com/NLnetLabs/domain.git", branch = "patches-for-nameshed-prototype", features = [
    "unstable-crypto-sign",
] }
tracing-subscriber = { version = "0.3.18", features = ["env-filter"] }
hex = "0.4"
kmip-ttlv = { git = "https://github.com/NLnetLabs/kmip-ttlv", branch = "next", version = "0.4.0", default-features = false, features = [
    "async-with-tokio",
    "high-level",
] }
kmip = { git = "https://github.com/NLnetLabs/kmip-protocol", branch = "next", package = "kmip-protocol", version = "0.5", default-features = false, features = [
    "tls-with-tokio-rustls",
] }
log = "0.4"
rpki = { version = "0.18", features = ["crypto"] }
tokio = { version = "1.44.2", features = ["macros", "net", "rt-multi-thread"] }
rustls = "0.23.26"
tokio-rustls = "0.26.2"
rand = "0.9.1"
r2d2 = "0.8.10"
moka = { version = "0.12.10", features = ["sync"] }

[features]
default = ["domain/ring"]

openssl = ["domain/openssl"]
